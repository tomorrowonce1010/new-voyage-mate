# ğŸš€ VoyageMate CI/CD æµæ°´çº¿è¯¦ç»†è¯´æ˜

## ğŸ“– ç›®å½•

1. [æµç¨‹æ¦‚è§ˆ](#æµç¨‹æ¦‚è§ˆ)
2. [CI é˜¶æ®µè¯¦è§£](#ci-é˜¶æ®µè¯¦è§£)
3. [CD é˜¶æ®µè¯¦è§£](#cd-é˜¶æ®µè¯¦è§£)
4. [å¦‚ä½•è§¦å‘æµç¨‹](#å¦‚ä½•è§¦å‘æµç¨‹)
5. [å¤±è´¥å¤„ç†æœºåˆ¶](#å¤±è´¥å¤„ç†æœºåˆ¶)
6. [å®é™…æ¼”ç¤ºæ­¥éª¤](#å®é™…æ¼”ç¤ºæ­¥éª¤)

---

## æµç¨‹æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         å®Œæ•´ CI/CD æµç¨‹å›¾                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PR æäº¤ â†’ CI é˜¶æ®µ â†’ CD é˜¶æ®µ â†’ éƒ¨ç½²å®Œæˆ
           â†“           â†“
         å¤±è´¥é€€å›    ä»…åœ¨æˆåŠŸæ—¶æ‰§è¡Œ

è¯¦ç»†æµç¨‹ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. PR åˆ›å»º    â”‚
â”‚  æˆ–ä»£ç æ¨é€   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CI é˜¶æ®µ (æŒç»­é›†æˆ)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é˜¶æ®µ 1: ğŸ“ ä»£ç è´¨é‡æ£€æŸ¥                                    â”‚
â”‚         - ESLint / Prettier æ ¼å¼æ£€æŸ¥                      â”‚
â”‚         - å®‰å…¨æ¼æ´æ‰«æ                                     â”‚
â”‚                                                          â”‚
â”‚ é˜¶æ®µ 2: ğŸ—ï¸ æ„å»ºå’Œæµ‹è¯•                                     â”‚
â”‚         - Backend: Maven æ„å»º + JUnit æµ‹è¯•               â”‚
â”‚         - Frontend: npm æ„å»º + Jest æµ‹è¯•                 â”‚
â”‚         - ä¸Šä¼ æ„å»ºäº§ç‰©                                     â”‚
â”‚                                                          â”‚
â”‚ é˜¶æ®µ 3: ğŸ”— é›†æˆæµ‹è¯•                                       â”‚
â”‚         - API æ¥å£æµ‹è¯•                                    â”‚
â”‚         - ç«¯åˆ°ç«¯æµ‹è¯•                                      â”‚
â”‚                                                          â”‚
â”‚ é˜¶æ®µ 4: âœ… CI æ€»ç»“                                        â”‚
â”‚         - æ£€æŸ¥æ‰€æœ‰æ­¥éª¤çŠ¶æ€                                 â”‚
â”‚         - å†³å®šæ˜¯å¦ç»§ç»­åˆ° CD                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ CI é€šè¿‡ï¼Ÿ â”‚
        â””â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”˜
     å¤±è´¥  â”‚    â”‚  æˆåŠŸ
        â”Œâ”€â”€â–¼â”€â”  â”‚
        â”‚é€€å› â”‚  â”‚
        â”‚ä¿®å¤ â”‚  â”‚
        â””â”€â”€â”€â”€â”˜  â”‚
                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   CD é˜¶æ®µ (æŒç»­éƒ¨ç½²)                       â”‚
â”‚                  ä»…åœ¨ main åˆ†æ”¯ + CI æˆåŠŸæ—¶æ‰§è¡Œ             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ é˜¶æ®µ 5: ğŸ³ æ„å»º Docker é•œåƒ                               â”‚
â”‚         - å°†æ„å»ºäº§ç‰©æ‰“åŒ…æˆ Docker é•œåƒ                      â”‚
â”‚                                                          â”‚
â”‚ é˜¶æ®µ 6: ğŸš€ éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ                                  â”‚
â”‚         - SSH è¿æ¥æµ‹è¯•æœåŠ¡å™¨                              â”‚
â”‚         - æ›´æ–° Docker å®¹å™¨                                â”‚
â”‚                                                          â”‚
â”‚ é˜¶æ®µ 7: ğŸ’¨ å†’çƒŸæµ‹è¯•                                       â”‚
â”‚         - å¥åº·æ£€æŸ¥                                        â”‚
â”‚         - åŸºç¡€åŠŸèƒ½éªŒè¯                                     â”‚
â”‚                                                          â”‚
â”‚ é˜¶æ®µ 8: ğŸ‘¤ ç­‰å¾…äººå·¥å®¡æ‰¹                                   â”‚
â”‚         - ç®¡ç†å‘˜å®¡æŸ¥æµ‹è¯•ç¯å¢ƒ                               â”‚
â”‚         - æ‰¹å‡†ç”Ÿäº§éƒ¨ç½²                                     â”‚
â”‚                                                          â”‚
â”‚ é˜¶æ®µ 9: ğŸ¯ éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ                                  â”‚
â”‚         - æ»šåŠ¨æ›´æ–°ç”Ÿäº§æœåŠ¡å™¨                               â”‚
â”‚         - é›¶åœæœºéƒ¨ç½²                                      â”‚
â”‚                                                          â”‚
â”‚ é˜¶æ®µ 10: âœ… éƒ¨ç½²åéªŒè¯                                    â”‚
â”‚          - ç”Ÿäº§ç¯å¢ƒå¥åº·æ£€æŸ¥                                â”‚
â”‚          - å‘é€é€šçŸ¥                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ ğŸ‰ å®Œæˆ   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## CI é˜¶æ®µè¯¦è§£

### é˜¶æ®µ 1: ğŸ“ ä»£ç è´¨é‡æ£€æŸ¥

**ç›®çš„**: ç¡®ä¿ä»£ç ç¬¦åˆå›¢é˜Ÿè§„èŒƒå’Œå®‰å…¨æ ‡å‡†

**æ‰§è¡Œå†…å®¹**:
- ESLint æ£€æŸ¥ JavaScript/TypeScript ä»£ç 
- Prettier æ£€æŸ¥ä»£ç æ ¼å¼
- SonarQube ä»£ç è´¨é‡åˆ†æï¼ˆå¯é€‰ï¼‰
- å®‰å…¨æ¼æ´æ‰«æ

**å¤±è´¥åœºæ™¯**:
- ä»£ç æ ¼å¼ä¸ç¬¦åˆè§„èŒƒ
- å‘ç°é«˜å±å®‰å…¨æ¼æ´
- ä»£ç å¤æ‚åº¦è¿‡é«˜

**å¤„ç†æ–¹å¼**: 
```bash
# å¦‚æœå¤±è´¥ï¼Œæµç¨‹ç«‹å³ç»ˆæ­¢
âŒ ä»£ç æ£€æŸ¥å¤±è´¥ï¼
ğŸ’¡ è¯·ä¿®å¤ä»¥ä¸‹é—®é¢˜ï¼š
   - src/pages/Chat.js: 'currentUser' is defined but never used
   - å»ºè®®è¿è¡Œ: npm run lint --fix
```

---

### é˜¶æ®µ 2: ğŸ—ï¸ æ„å»ºå’Œæµ‹è¯•

**ç›®çš„**: ç¼–è¯‘ä»£ç å¹¶è¿è¡Œå•å…ƒæµ‹è¯•

#### Backend æ„å»ºæµç¨‹:
```bash
# 1. è®¾ç½® Java ç¯å¢ƒ
â˜• å®‰è£… JDK 17

# 2. æ¸…ç†å¹¶æ„å»º
ğŸ”¨ æ‰§è¡Œ: mvn clean package

# 3. è¿è¡Œæµ‹è¯•
ğŸ§ª æ‰§è¡Œ: mvn test
   âœ“ UserServiceTest: 15 passed
   âœ“ ItineraryServiceTest: 23 passed
   âœ“ CommunityServiceTest: 12 passed

# 4. ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
ğŸ“Š ä»£ç è¦†ç›–ç‡: 78%
```

#### Frontend æ„å»ºæµç¨‹:
```bash
# 1. å®‰è£…ä¾èµ–
ğŸ“¦ npm ci

# 2. Lint æ£€æŸ¥
ğŸ” npm run lint

# 3. è¿è¡Œæµ‹è¯•
ğŸ§ª npm test
   âœ“ Component tests: 45 passed
   âœ“ Integration tests: 12 passed

# 4. æ„å»ºç”Ÿäº§ç‰ˆæœ¬
ğŸ—ï¸ npm run build
   âœ“ ç”Ÿæˆä¼˜åŒ–çš„ç”Ÿäº§æ„å»º
   âœ“ æ–‡ä»¶å¤§å°: 2.3 MB
```

**äº§ç‰©**:
- `backend/target/backend-0.0.1-SNAPSHOT.jar`
- `frontend/build/` ç›®å½•

**å¤±è´¥åœºæ™¯**:
- ç¼–è¯‘é”™è¯¯
- æµ‹è¯•ç”¨ä¾‹å¤±è´¥
- å†…å­˜æº¢å‡º

**å¤„ç†æ–¹å¼**:
```bash
âŒ æµ‹è¯•å¤±è´¥ï¼
ğŸ“‹ å¤±è´¥è¯¦æƒ…:
   âœ— UserServiceTest.testCreateUser: Expected user to be created
   
ğŸ’¡ å»ºè®®:
   1. æœ¬åœ°è¿è¡Œ: mvn test
   2. æŸ¥çœ‹æ—¥å¿—æ‰¾åˆ°å¤±è´¥åŸå› 
   3. ä¿®å¤åé‡æ–°æäº¤
```

---

### é˜¶æ®µ 3: ğŸ”— é›†æˆæµ‹è¯•

**ç›®çš„**: æµ‹è¯•å„æœåŠ¡ä¹‹é—´çš„åä½œ

**æ‰§è¡Œå†…å®¹**:
```bash
# 1. å¯åŠ¨æµ‹è¯•ç¯å¢ƒ
ğŸš€ å¯åŠ¨ Backend æœåŠ¡: localhost:8080
ğŸš€ å¯åŠ¨ Frontend æœåŠ¡: localhost:3000

# 2. API æ¥å£æµ‹è¯•
ğŸ”— æµ‹è¯• POST /api/auth/login âœ“
ğŸ”— æµ‹è¯• GET /api/itinerary/list âœ“
ğŸ”— æµ‹è¯• POST /api/community/create âœ“

# 3. ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆå¯é€‰ï¼‰
ğŸŒ æµ‹è¯•ç”¨æˆ·ç™»å½•æµç¨‹ âœ“
ğŸŒ æµ‹è¯•åˆ›å»ºè¡Œç¨‹æµç¨‹ âœ“
```

**å¤±è´¥åœºæ™¯**:
- API æ¥å£è¿”å›é”™è¯¯
- æœåŠ¡æ— æ³•è¿æ¥
- æ•°æ®ä¸ä¸€è‡´

---

### é˜¶æ®µ 4: âœ… CI æ€»ç»“

**ç›®çš„**: æ£€æŸ¥æ‰€æœ‰ CI æ­¥éª¤ï¼Œå†³å®šæ˜¯å¦ç»§ç»­

**æ£€æŸ¥é€»è¾‘**:
```yaml
if ä»£ç æ£€æŸ¥å¤±è´¥ OR æ„å»ºæµ‹è¯•å¤±è´¥ OR é›†æˆæµ‹è¯•å¤±è´¥:
    âŒ CI å¤±è´¥ - æµç¨‹ç»ˆæ­¢
    ğŸ’¡ è¯·ä¿®å¤é—®é¢˜åé‡æ–°æäº¤ PR
else:
    âœ… CI é€šè¿‡ - å‡†å¤‡è¿›å…¥ CD é˜¶æ®µ
```

**è¾“å‡ºæŠ¥å‘Š**:
```
ğŸ“Š CI é˜¶æ®µæ€»ç»“æŠ¥å‘Š
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… ä»£ç æ£€æŸ¥: é€šè¿‡
âœ… æ„å»ºæµ‹è¯•: é€šè¿‡
âœ… é›†æˆæµ‹è¯•: é€šè¿‡
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ¨ CI å…¨éƒ¨é€šè¿‡ï¼
```

---

## CD é˜¶æ®µè¯¦è§£

### âš ï¸ é‡è¦è¯´æ˜

CD é˜¶æ®µ**ä»…åœ¨ä»¥ä¸‹æ¡ä»¶å…¨éƒ¨æ»¡è¶³æ—¶æ‰§è¡Œ**:
1. âœ… CI é˜¶æ®µå…¨éƒ¨é€šè¿‡
2. âœ… ä»£ç æ¨é€åˆ° `main` åˆ†æ”¯ï¼ˆä¸æ˜¯ PRï¼‰
3. âœ… æœ‰éƒ¨ç½²æƒé™

å¯¹äº **Pull Request**:
- âœ… ä¼šæ‰§è¡Œå®Œæ•´çš„ CI é˜¶æ®µ
- âŒ ä¸ä¼šæ‰§è¡Œ CD é˜¶æ®µ
- ğŸ’¡ åˆå¹¶åˆ° main åæ‰ä¼šè§¦å‘éƒ¨ç½²

---

### é˜¶æ®µ 5: ğŸ³ æ„å»º Docker é•œåƒ

**ç›®çš„**: å°†æ„å»ºäº§ç‰©æ‰“åŒ…æˆå¯éƒ¨ç½²çš„å®¹å™¨

**æ‰§è¡Œå†…å®¹**:
```bash
# 1. ä¸‹è½½ CI é˜¶æ®µçš„æ„å»ºäº§ç‰©
ğŸ“¥ ä¸‹è½½ backend-build
ğŸ“¥ ä¸‹è½½ frontend-build

# 2. æ„å»º Docker é•œåƒ
ğŸ³ docker build -t voyagemate-backend:latest ./backend
   âœ“ é•œåƒå¤§å°: 256 MB
   
ğŸ³ docker build -t voyagemate-frontend:latest ./frontend
   âœ“ é•œåƒå¤§å°: 128 MB

# 3. æ¨é€åˆ°é•œåƒä»“åº“
ğŸ“¤ docker push ghcr.io/username/voyagemate-backend:latest
ğŸ“¤ docker push ghcr.io/username/voyagemate-frontend:latest
```

**éœ€è¦çš„æ–‡ä»¶**:
- `backend/Dockerfile`
- `frontend/Dockerfile`

**ç¤ºä¾‹ Dockerfile**:
```dockerfile
# backend/Dockerfile
FROM openjdk:17-jdk-slim
COPY target/*.jar app.jar
EXPOSE 8080
ENTRYPOINT ["java", "-jar", "/app.jar"]
```

---

### é˜¶æ®µ 6: ğŸš€ éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ

**ç›®çš„**: åœ¨ç±»ç”Ÿäº§ç¯å¢ƒä¸­éªŒè¯

**æ‰§è¡Œå†…å®¹**:
```bash
# 1. è¿æ¥æµ‹è¯•æœåŠ¡å™¨
ğŸ” SSH è¿æ¥: user@staging.voyagemate.com

# 2. æ‹‰å–æœ€æ–°é•œåƒ
ğŸ“¥ docker pull voyagemate-backend:latest
ğŸ“¥ docker pull voyagemate-frontend:latest

# 3. æ›´æ–°æœåŠ¡
ğŸ”„ docker-compose up -d
   âœ“ backend å®¹å™¨å·²æ›´æ–°
   âœ“ frontend å®¹å™¨å·²æ›´æ–°
   âœ“ nginx å®¹å™¨è¿è¡Œä¸­

# 4. ç­‰å¾…æœåŠ¡å¯åŠ¨
â³ ç­‰å¾… backend å¥åº·æ£€æŸ¥...
âœ… Backend æœåŠ¡å°±ç»ª (8080)
âœ… Frontend æœåŠ¡å°±ç»ª (3000)
```

**æµ‹è¯•ç¯å¢ƒåœ°å€**: https://staging.voyagemate.com

---

### é˜¶æ®µ 7: ğŸ’¨ å†’çƒŸæµ‹è¯•

**ç›®çš„**: å¿«é€ŸéªŒè¯æ ¸å¿ƒåŠŸèƒ½

**æµ‹è¯•é¡¹ç›®**:
```bash
# 1. å¥åº·æ£€æŸ¥
ğŸ¥ GET /api/health
   âœ“ çŠ¶æ€ç : 200
   âœ“ å“åº”æ—¶é—´: 45ms

# 2. å…³é”®æ¥å£æµ‹è¯•
ğŸ”— POST /api/auth/login
   âœ“ ç™»å½•æˆåŠŸ

ğŸ”— GET /api/itinerary/list  
   âœ“ è·å–è¡Œç¨‹åˆ—è¡¨

# 3. å‰ç«¯å¯è®¿é—®æ€§
ğŸŒ è®¿é—® https://staging.voyagemate.com
   âœ“ é¡µé¢åŠ è½½æˆåŠŸ
   âœ“ èµ„æºåŠ è½½æ­£å¸¸
```

**å¤±è´¥å¤„ç†**:
```bash
âŒ å†’çƒŸæµ‹è¯•å¤±è´¥ï¼
ğŸ”™ è‡ªåŠ¨å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬
ğŸ“§ å‘é€å‘Šè­¦é€šçŸ¥
```

---

### é˜¶æ®µ 8: ğŸ‘¤ ç­‰å¾…äººå·¥å®¡æ‰¹

**ç›®çš„**: äººå·¥ç¡®è®¤åå†éƒ¨ç½²åˆ°ç”Ÿäº§

**å®¡æ‰¹æµç¨‹**:
```
1. æµ‹è¯•ç¯å¢ƒéªŒè¯å®Œæˆ
2. GitHub å‘é€å®¡æ‰¹è¯·æ±‚
3. ç®¡ç†å‘˜ç™»å½• GitHub Actions
4. æŸ¥çœ‹æµ‹è¯•ç»“æœ
5. ç‚¹å‡» "Approve and Deploy"
```

**å®¡æ‰¹ç•Œé¢ç¤ºä¾‹**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç­‰å¾…éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒå®¡æ‰¹              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æµ‹è¯•ç¯å¢ƒ: âœ… è¿è¡Œæ­£å¸¸               â”‚
â”‚  å†’çƒŸæµ‹è¯•: âœ… å…¨éƒ¨é€šè¿‡               â”‚
â”‚  ä»£ç å®¡æŸ¥: âœ… å·²æ‰¹å‡†                 â”‚
â”‚                                    â”‚
â”‚  [ æ‰¹å‡†éƒ¨ç½² ]  [ æ‹’ç» ]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### é˜¶æ®µ 9: ğŸ¯ éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

**ç›®çš„**: æ›´æ–°ç”Ÿäº§æœåŠ¡

**éƒ¨ç½²ç­–ç•¥**: æ»šåŠ¨æ›´æ–°ï¼ˆé›¶åœæœºï¼‰

**æ‰§è¡Œå†…å®¹**:
```bash
# 1. è¿æ¥ç”Ÿäº§æœåŠ¡å™¨
ğŸ” SSH è¿æ¥: user@prod1.voyagemate.com

# 2. æ»šåŠ¨æ›´æ–°
ğŸ”„ æ›´æ–° backend-1...
   âœ“ æ‹‰å–æ–°é•œåƒ
   âœ“ å¯åŠ¨æ–°å®¹å™¨
   âœ“ å¥åº·æ£€æŸ¥é€šè¿‡
   âœ“ åˆ‡æ¢æµé‡
   âœ“ åœæ­¢æ—§å®¹å™¨

ğŸ”„ æ›´æ–° backend-2...
   âœ“ åŒä¸Š

ğŸ”„ æ›´æ–° frontend...
   âœ“ åŒä¸Š

# 3. éªŒè¯
âœ… æ‰€æœ‰æœåŠ¡æ›´æ–°å®Œæˆ
ğŸ“Š 0 ç§’åœæœºæ—¶é—´
```

**ç”Ÿäº§ç¯å¢ƒåœ°å€**: https://voyagemate.com

---

### é˜¶æ®µ 10: âœ… éƒ¨ç½²åéªŒè¯

**ç›®çš„**: ç¡®è®¤ç”Ÿäº§ç¯å¢ƒæ­£å¸¸

**æ£€æŸ¥é¡¹ç›®**:
```bash
# 1. æœåŠ¡å¥åº·æ£€æŸ¥
ğŸ¥ æ‰€æœ‰æœåŠ¡å¥åº·: âœ…
   - Backend: æ­£å¸¸
   - Frontend: æ­£å¸¸
   - Database: æ­£å¸¸
   - Redis: æ­£å¸¸

# 2. ç›‘æ§æŒ‡æ ‡
ğŸ“Š CPU ä½¿ç”¨ç‡: 35%
ğŸ“Š å†…å­˜ä½¿ç”¨ç‡: 52%
ğŸ“Š å“åº”æ—¶é—´: å¹³å‡ 120ms

# 3. é”™è¯¯ç‡æ£€æŸ¥
ğŸ“‰ é”™è¯¯ç‡: 0.01% (æ­£å¸¸)

# 4. å‘é€é€šçŸ¥
ğŸ“§ é€šçŸ¥å›¢é˜Ÿ: ç”Ÿäº§éƒ¨ç½²æˆåŠŸ
ğŸ“± æ›´æ–°çŠ¶æ€é¡µé¢
```

---

## å¦‚ä½•è§¦å‘æµç¨‹

### æ–¹å¼ 1: é€šè¿‡ Pull Requestï¼ˆåªæ‰§è¡Œ CIï¼‰

```bash
# 1. åˆ›å»ºæ–°åˆ†æ”¯
git checkout -b feature/new-feature

# 2. å¼€å‘å¹¶æäº¤
git add .
git commit -m "feat: add new feature"
git push origin feature/new-feature

# 3. åœ¨ GitHub åˆ›å»º PR
# â†’ è‡ªåŠ¨è§¦å‘ CI æµç¨‹
# âœ… ä»£ç æ£€æŸ¥
# âœ… æ„å»ºæµ‹è¯•  
# âœ… é›†æˆæµ‹è¯•
# âŒ ä¸æ‰§è¡Œéƒ¨ç½²
```

### æ–¹å¼ 2: åˆå¹¶åˆ° mainï¼ˆæ‰§è¡Œå®Œæ•´ CI/CDï¼‰

```bash
# 1. PR å®¡æŸ¥é€šè¿‡ååˆå¹¶
# â†’ è‡ªåŠ¨è§¦å‘å®Œæ•´ CI/CD

# æµç¨‹:
# âœ… CI é˜¶æ®µï¼ˆåŒä¸Šï¼‰
# âœ… æ„å»º Docker é•œåƒ
# âœ… éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ
# âœ… å†’çƒŸæµ‹è¯•
# â¸ï¸ ç­‰å¾…å®¡æ‰¹
# âœ… éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
# âœ… éªŒè¯
```

### æ–¹å¼ 3: æ‰‹åŠ¨è§¦å‘

```bash
# åœ¨ GitHub Actions ç•Œé¢
# 1. é€‰æ‹© workflow
# 2. ç‚¹å‡» "Run workflow"
# 3. é€‰æ‹©åˆ†æ”¯
# 4. ç‚¹å‡»è¿è¡Œ
```

---

## å¤±è´¥å¤„ç†æœºåˆ¶

### CI å¤±è´¥å¤„ç†æµç¨‹

```
CI å¤±è´¥ â†’ æµç¨‹ç»ˆæ­¢ â†’ å‘é€é€šçŸ¥ â†’ å¼€å‘è€…ä¿®å¤ â†’ é‡æ–°æäº¤
```

**é€šçŸ¥å†…å®¹**:
```
âŒ CI å¤±è´¥é€šçŸ¥

PR: #123 - Add new feature
åˆ†æ”¯: feature/new-feature
å¤±è´¥é˜¶æ®µ: æ„å»ºæµ‹è¯•

é”™è¯¯è¯¦æƒ…:
  âœ— UserServiceTest.testCreateUser
  
æŸ¥çœ‹è¯¦æƒ…: https://github.com/xxx/actions/runs/123

ğŸ’¡ ä¿®å¤å»ºè®®:
  1. æœ¬åœ°è¿è¡Œæµ‹è¯•æ‰¾åˆ°é—®é¢˜
  2. ä¿®å¤åé‡æ–°æ¨é€
```

### CD å¤±è´¥å¤„ç†æµç¨‹

```
éƒ¨ç½²å¤±è´¥ â†’ è‡ªåŠ¨å›æ»š â†’ å‘é€å‘Šè­¦ â†’ äººå·¥ä»‹å…¥
```

**å›æ»šç­–ç•¥**:
```bash
# æ£€æµ‹åˆ°éƒ¨ç½²å¤±è´¥
âŒ éƒ¨ç½²å¤±è´¥: å¥åº·æ£€æŸ¥æœªé€šè¿‡

# è‡ªåŠ¨å›æ»š
ğŸ”™ å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬
   âœ“ åˆ‡æ¢æµé‡åˆ°æ—§ç‰ˆæœ¬
   âœ“ åœæ­¢æ–°ç‰ˆæœ¬å®¹å™¨
   âœ“ æ¢å¤æœåŠ¡æ­£å¸¸

# å‘é€å‘Šè­¦
ğŸ“§ å‘Šè­¦: ç”Ÿäº§éƒ¨ç½²å¤±è´¥å·²å›æ»š
ğŸ” é”™è¯¯æ—¥å¿—å·²ä¿å­˜
```

---

## å®é™…æ¼”ç¤ºæ­¥éª¤

### æ¼”ç¤ºåœºæ™¯ 1: CI å¤±è´¥é€€å›

```bash
# 1. åˆ›å»ºæœ‰é—®é¢˜çš„ä»£ç 
echo "const x = 'unused variable';" >> frontend/src/App.js

# 2. æäº¤ PR
git add .
git commit -m "test: trigger CI failure"
git push origin test-branch

# 3. è§‚å¯Ÿ CI æµç¨‹
âœ… ä»£ç æ£€æŸ¥ â†’ é€šè¿‡
ğŸ—ï¸ æ„å»ºæµ‹è¯• â†’ è¿›è¡Œä¸­
   âŒ ESLint æ£€æŸ¥å¤±è´¥
   
# 4. æµç¨‹ç»ˆæ­¢
âŒ CI å¤±è´¥ï¼Œæµç¨‹å·²ç»ˆæ­¢
ğŸ’¡ è¯·ä¿®å¤ ESLint é”™è¯¯åé‡æ–°æäº¤
```

### æ¼”ç¤ºåœºæ™¯ 2: CI æˆåŠŸï¼Œè§¦å‘ CD

```bash
# 1. ä¿®å¤é—®é¢˜ååˆå¹¶åˆ° main
git checkout main
git merge feature-branch
git push origin main

# 2. è§‚å¯Ÿå®Œæ•´æµç¨‹
â”Œâ”€ CI é˜¶æ®µ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… ä»£ç æ£€æŸ¥            â”‚
â”‚ âœ… æ„å»ºæµ‹è¯•            â”‚
â”‚ âœ… é›†æˆæµ‹è¯•            â”‚
â”‚ âœ… CI æ€»ç»“             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€ CD é˜¶æ®µ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… æ„å»ºé•œåƒ            â”‚
â”‚ âœ… éƒ¨ç½²æµ‹è¯•ç¯å¢ƒ         â”‚
â”‚ âœ… å†’çƒŸæµ‹è¯•            â”‚
â”‚ â¸ï¸  ç­‰å¾…å®¡æ‰¹           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
    [æ‰¹å‡†éƒ¨ç½²]
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… éƒ¨ç½²ç”Ÿäº§ç¯å¢ƒ         â”‚
â”‚ âœ… éƒ¨ç½²éªŒè¯            â”‚
â”‚ ğŸ‰ å®Œæˆ               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## é…ç½®è¦æ±‚

### å¿…éœ€çš„æ–‡ä»¶

1. **Workflow é…ç½®**: `.github/workflows/pr-cicd-demo.yml` âœ… å·²åˆ›å»º
2. **Dockerfile**: 
   - `backend/Dockerfile` âŒ éœ€è¦åˆ›å»º
   - `frontend/Dockerfile` âŒ éœ€è¦åˆ›å»º
3. **éƒ¨ç½²è„šæœ¬**: `scripts/deploy.sh` âŒ å¯é€‰

### å¿…éœ€çš„ Secrets

åœ¨ GitHub Settings â†’ Secrets ä¸­æ·»åŠ :

1. `DOCKER_USERNAME` - Docker Hub ç”¨æˆ·å
2. `DOCKER_PASSWORD` - Docker Hub å¯†ç 
3. `SSH_PRIVATE_KEY` - æœåŠ¡å™¨ SSH å¯†é’¥
4. `SERVER_HOST` - æœåŠ¡å™¨åœ°å€
5. `SERVER_USER` - æœåŠ¡å™¨ç”¨æˆ·å

### ç¯å¢ƒé…ç½®

åœ¨ GitHub Settings â†’ Environments ä¸­åˆ›å»º:

1. **staging** (æµ‹è¯•ç¯å¢ƒ)
   - URL: https://staging.voyagemate.com
   - æ— éœ€å®¡æ‰¹

2. **production** (ç”Ÿäº§ç¯å¢ƒ)
   - URL: https://voyagemate.com
   - éœ€è¦å®¡æ‰¹
   - å®¡æ‰¹äºº: é¡¹ç›®ç®¡ç†å‘˜

---

## æ€»ç»“

### âœ… ä½ ç°åœ¨å¯ä»¥å®ç°çš„ï¼š

1. âœ… å®Œæ•´çš„ CI æµç¨‹ï¼ˆä»£ç æ£€æŸ¥ã€æ„å»ºã€æµ‹è¯•ï¼‰
2. âœ… PR æäº¤è‡ªåŠ¨è§¦å‘æ£€æŸ¥
3. âœ… å¤±è´¥è‡ªåŠ¨é€€å›æœºåˆ¶
4. âœ… æ„å»ºäº§ç‰©ç®¡ç†

### âš ï¸ éœ€è¦è¡¥å……æ‰èƒ½å®Œæ•´ CDï¼š

1. âŒ Docker é…ç½®æ–‡ä»¶
2. âŒ æœåŠ¡å™¨éƒ¨ç½²ç¯å¢ƒ
3. âŒ SSH å¯†é’¥é…ç½®
4. âŒ åŸŸåå’Œ HTTPS è¯ä¹¦

### ğŸ“ ä¸‹ä¸€æ­¥å»ºè®®ï¼š

1. **ç°åœ¨å°±å¯ä»¥æµ‹è¯• CI æµç¨‹**ï¼š
   ```bash
   # åˆ›å»ºä¸€ä¸ªæµ‹è¯• PR çœ‹çœ‹æ•ˆæœ
   git checkout -b test-ci
   # åšä¸€äº›ä¿®æ”¹
   git push origin test-ci
   # åˆ›å»º PRï¼Œè§‚å¯Ÿ CI æµç¨‹
   ```

2. **å¦‚æœè¦å®Œæ•´çš„ CDï¼Œéœ€è¦**ï¼š
   - å‡†å¤‡éƒ¨ç½²æœåŠ¡å™¨
   - åˆ›å»º Dockerfile
   - é…ç½®åŸŸåå’Œ SSL
   - æ·»åŠ  GitHub Secrets

---

## å¿«é€Ÿå¼€å§‹

```bash
# 1. æäº¤å½“å‰çš„ workflow é…ç½®
cd /root/voyagemate/new-voyage-mate
git add .github/workflows/pr-cicd-demo.yml
git add CICD_PIPELINE_GUIDE.md
git commit -m "docs: add complete CI/CD pipeline demo"
git push origin main

# 2. åˆ›å»ºæµ‹è¯• PR
git checkout -b test-cicd-demo
echo "# Test" >> README.md
git add README.md
git commit -m "test: trigger CI/CD demo"
git push origin test-cicd-demo

# 3. åœ¨ GitHub åˆ›å»º PRï¼Œè§‚å¯Ÿæµç¨‹æ‰§è¡Œï¼
```

ğŸ‰ ç°åœ¨ä½ æœ‰ä¸€ä¸ªå®Œæ•´çš„ CI/CD æµç¨‹æ¼”ç¤ºäº†ï¼

